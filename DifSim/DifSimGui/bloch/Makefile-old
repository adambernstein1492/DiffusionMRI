# 
# Makefile for Visualization Toolkit C++ progs
# 
#------------------------------------------------------------------------------
#
SHELL = /bin/sh
.SUFFIXES: .cxx .c

# lrf's binary directory
RM = /bin/rm -f
MV = /bin/mv -f
CP = /bin/cp -f
BPATH = $(HOME)/bin

FINK_PATH = /sw
FINK_LIB_PATH = ${FINK_PATH}/lib
FINK_BIN_PATH = ${FINK_PATH}/bin
FINK_INC_PATH = ${FINK_PATH}/include

srcdir   = .

#-----------------------------------------------------------------------------

CCOPTIONS =-Wno-deprecated -Wl,-rpath
CEXTRA = -Wcomment -Wformat -Wpointer-arith -DUSE_TRACING -fomit-frame-pointer -DHAVE_XDBE
CC = gcc -O2 -ffast-math -DLINUX2 -DNO_GAMMA $(CEXTRA) $(CCOPTIONS)

CC_FLAGS = -g ${CPPFLAGS} ${USER_CXXFLAGS} ${CCOPTIONS} \
	-I${srcdir} \
	-I${srcdir}/.. \
	-I${FINK_INC_PATH}

.c.o: 
	${CXX} ${CXX_FLAGS} -c $< -o $@

.cxx.o: 
	${CXX} ${CXX_FLAGS} -c $< -o $@

OBJS_UTIL  = alloc.o vector.o matrix.o ioutils.o
OBJS_BLOCH = bloch.o vsechgp.o excite.o ${OBJS_UTIL} 

#------------------------------------------------------------------------------

PROGS = bloch

all: ${PROGS}

bloch: ${OBJS_BLOCH}
	${CC} -o bloch ${CC_FLAGS} ${OBJS_BLOCH} -lm

#------------------------------------------------------------------------------

bloch.o  : ioutils.h alloc.h vector.h matrix.h grads.h 
ioutils.o : ioutils.h
alloc.o   : alloc.h
vector.o  : vector.h
matrix.o  : matrix.h

clean::
	$(RM) ${PROGS} *.CKP *.ln *.BAK *.bak *.o core errs ,* *~ *.a .emacs_* tags TAGS make.log MakeOut "#"* junk*
